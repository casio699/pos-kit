import{e as d,b as p}from"./index-C7_9dnC7.js";const g="http://localhost:3000".replace(/\/$/,""),s=d.create({baseURL:g,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{const{token:t,tenantId:a}=p.getState();return t&&(e.headers.Authorization=`Bearer ${t}`),a&&(e.headers["X-Tenant-ID"]=a),e},e=>Promise.reject(e));s.interceptors.response.use(e=>e,async e=>{var t,a,n,r,i,c,l,u;if(((t=e.response)==null?void 0:t.status)===401&&p.getState().reset(),((a=e.response)==null?void 0:a.status)===403){if(((r=(n=e.config)==null?void 0:n.method)==null?void 0:r.toLowerCase())==="get"&&((i=e.config.url)!=null&&i.includes("/products")))return{data:[]};if(((l=(c=e.config)==null?void 0:c.method)==null?void 0:l.toLowerCase())==="get"&&((u=e.config.url)!=null&&u.match(/\/products\/[^/]+$/)))return{data:null}}return Promise.reject(e)});async function y(e){const{data:t}=await s.post("/auth/register",e);return t}async function f(e){const{data:t}=await s.post("/auth/login",e);return t}async function m(e){const{data:t}=await s.get("/products",{params:{tenant_id:e}});return t}async function R(e,t){const{data:a}=await s.post("/products",{tenant_id:e,...t});return a}async function h(e,t){const{data:a}=await s.get("/inventory",{params:{tenant_id:e,...t||{}}});return a}async function b(e,t){const{data:a}=await s.post("/inventory/adjust",{tenant_id:e,...t});return a}async function P(e,t){const{data:a}=await s.post("/locations",{tenant_id:e,...t});return a}async function $(e){const{data:t}=await s.get("/locations",{params:{tenant_id:e}});return t}async function w(e,t){const{data:a}=await s.post("/sales",{tenant_id:e,...t});return a}async function S(e){const{data:t}=await s.get("/sales",{params:{tenant_id:e}});return t}const U={createSale:e=>s.post("/sales",e),listSales:()=>s.get("/sales"),getSale:e=>s.get(`/sales/${e}`),refundSale:(e,t)=>s.post(`/sales/${e}/refund`,t)},v={createPaymentIntent:e=>s.post("/payments/create-payment-intent",e),getPaymentStatus:e=>s.get(`/payments/status/${e}`)},A={syncProducts:e=>s.post("/shopify/sync/products",{products:e}),syncInventory:e=>s.post("/shopify/sync/inventory",{inventory:e}),createOrder:e=>s.post("/shopify/orders/create",e),getProducts:()=>s.get("/shopify/products"),getSyncStatus:()=>s.get("/shopify/sync/status")},o={listRoles:()=>s.get("/rbac/roles"),createRole:e=>s.post("/rbac/roles",e),updateRole:(e,t)=>s.put(`/rbac/roles/${e}`,t),deleteRole:e=>s.delete(`/rbac/roles/${e}`),listUsers:()=>s.get("/rbac/users"),assignRole:(e,t)=>s.post(`/rbac/users/${e}/roles`,t),removeRole:(e,t)=>s.delete(`/rbac/users/${e}/roles/${t}`),getUserRoles:e=>s.get(`/rbac/users/${e}/roles`),getUserPermissions:e=>s.get(`/rbac/users/${e}/permissions`),listPermissions:()=>s.get("/rbac/permissions"),initializeRoles:()=>s.post("/rbac/initialize-roles")},L={register:y,login:f,listProducts:m,createProduct:R,listInventory:h,adjustInventory:b,createLocation:P,listLocations:$,createSale:w,listSales:S,salesApi:U,paymentApi:v,shopifyApi:A,rbacApi:o,listRoles:o.listRoles,createRole:o.createRole,updateRole:o.updateRole,deleteRole:o.deleteRole,listUsers:o.listUsers,assignRole:o.assignRole,removeRole:o.removeRole,getUserRoles:o.getUserRoles,getUserPermissions:o.getUserPermissions,listPermissions:o.listPermissions,initializeRoles:o.initializeRoles};export{s as a,m as b,$ as c,h as d,P as e,b as f,S as g,w as h,L as i,f as l,v as p,y as r,A as s};
