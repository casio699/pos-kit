import{d as I,r as n,j as e,C as U}from"./index-C7_9dnC7.js";import{L as K}from"./LoadingSpinner-bJDsx-EH.js";import{s as b}from"./client-D5hvrTR8.js";import{P as C,S as V}from"./store-DPXPjm82.js";import{R as B}from"./refresh-cw-Bn3lNPW5.js";function q(){const{isAdmin:f}=I(),[l,j]=n.useState(null),[P,L]=n.useState([]),[c,i]=n.useState(!1),[v,x]=n.useState(""),[d,A]=n.useState(""),[m,T]=n.useState("all"),[p,M]=n.useState("table"),[N,w]=n.useState(!1),[r,o]=n.useState({name:"Test Product",description:"A test product for Shopify sync",price:29.99,sku:"TEST-001",stock:100,active:!0});n.useEffect(()=>{S()},[]);const S=async()=>{var s,a;i(!0);try{const t=await b.getSyncStatus();j(t.data)}catch(t){x(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to get sync status")}finally{i(!1)}},E=async()=>{var s,a;i(!0),x("");try{const t=await b.getProducts();L(t.data)}catch(t){x(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to fetch Shopify products")}finally{i(!1)}},F=async()=>{var s,a;i(!0),x("");try{await b.syncProducts([r]),j(t=>({...t,lastSync:new Date().toISOString(),lastAction:"Product synced"})),alert("Product synced successfully!")}catch(t){x(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to sync product")}finally{i(!1)}},g=P.filter(s=>{var h,u,k;const a=!d||((h=s.name)==null?void 0:h.toLowerCase().includes(d.toLowerCase()))||((u=s.sku)==null?void 0:u.toLowerCase().includes(d.toLowerCase()))||((k=s.description)==null?void 0:k.toLowerCase().includes(d.toLowerCase())),t=m==="all"||m==="active"&&s.active||m==="inactive"&&!s.active;return a&&t}),y=(()=>{const s=g.length,a=g.filter(u=>u.active).length,t=l!=null&&l.lastSync?new Date(l.lastSync):null,h=(l==null?void 0:l.status)||"Not connected";return{totalProducts:s,activeProducts:a,lastSyncTime:t,syncStatusText:h}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Shopify Integration"}),e.jsx("p",{className:"text-green-100",children:"Manage your Shopify store sync and product integration"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>M(p==="table"?"cards":"table"),className:"px-4 py-2 bg-white/20 backdrop-blur rounded-lg hover:bg-white/30 transition-colors text-white font-medium",children:p==="table"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),f()&&e.jsxs("button",{onClick:()=>w(!N),className:"px-4 py-2 bg-white text-green-600 rounded-lg hover:bg-green-50 font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Sync Product"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.totalProducts}),e.jsx("div",{className:"text-sm text-gray-600",children:"Products"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-emerald-600"})}),e.jsx("span",{className:"text-xs text-emerald-500 font-medium",children:"Active"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.activeProducts}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Products"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-xs text-blue-500 font-medium",children:"Status"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 truncate",children:y.syncStatusText}),e.jsx("div",{className:"text-sm text-gray-600",children:"Connection Status"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(V,{className:"w-6 h-6 text-purple-600"})}),e.jsx("span",{className:"text-xs text-purple-500 font-medium",children:"Store"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(l==null?void 0:l.shop)||"Not Connected"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Shopify Store"})]})]}),N&&f()&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sync Product to Shopify"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>o({...r,name:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU"}),e.jsx("input",{type:"text",value:r.sku,onChange:s=>o({...r,sku:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"SKU"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price"}),e.jsx("input",{type:"number",value:r.price,onChange:s=>o({...r,price:parseFloat(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Price",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock"}),e.jsx("input",{type:"number",value:r.stock,onChange:s=>o({...r,stock:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Stock quantity"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:s=>o({...r,description:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"Product description"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.active,onChange:s=>o({...r,active:s.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Active Product"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:c,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50",children:c?"Syncing...":"Sync Product"})]})]}),v&&e.jsx("div",{className:"mt-3 text-sm text-red-600",children:v})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search products by name, SKU, or description...",value:d,onChange:s=>A(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{value:m,onChange:s=>T(s.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Products"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:E,disabled:c,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50",children:c?"Loading...":"Refresh Products"}),e.jsx("button",{onClick:S,disabled:c,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:c?"Checking...":"Check Status"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:c?e.jsx(K,{message:"Loading Shopify products..."}):g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500",children:d||m!=="all"?"Try adjusting your search or filters to find what you're looking for.":"Connect your Shopify store and sync your first product."})]}):p==="table"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Description"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.sku})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",s.price]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.stock})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"Active":"Inactive"})}),e.jsx("td",{className:"py-4 px-4 hidden lg:table-cell text-sm text-gray-500 max-w-xs truncate",children:s.description||"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Edit"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Sync"})]})})]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(s=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center text-white font-bold",children:s.name.charAt(0).toUpperCase()}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"Active":"Inactive"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",s.stock]})]}),e.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["SKU: ",s.sku]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-3 truncate",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:"Edit"}),e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Sync"})]})]})},s.id))})})]})}export{q as default};
