import{b as G,c as R,r,j as e}from"./index-DFD28I4s.js";import{L as F}from"./LoadingSpinner-mVzqVygt.js";import{a as J,b as K,c as X,d as Y,e as Z}from"./client-C7ulCTuc.js";function re(){const{tenantId:m}=G(),{isAdmin:L}=R(),[u,i]=r.useState(!1),[h,c]=r.useState(null),[x,W]=r.useState(""),[p,q]=r.useState("all"),[v,O]=r.useState("table"),[N,B]=r.useState(!1),[b,H]=r.useState([]),[g,T]=r.useState([]),[Q,V]=r.useState([]),[S,z]=r.useState("Main Store"),[C,P]=r.useState("store"),[I,D]=r.useState(""),[j,M]=r.useState(""),[f,_]=r.useState(""),[A,E]=r.useState(10),w=async()=>{var t,s;i(!0),c(null);try{const[a,l,n]=await Promise.all([J(m),K(m).catch(()=>[]),X(m)]);H(a),T(l),V(n),a[0]&&!j&&M(a[0].id),l[0]&&!f&&_(l[0].id)}catch(a){c(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||a.message)}finally{i(!1)}};r.useEffect(()=>{w()},[]);const U=async()=>{var t,s;i(!0),c(null);try{await Y(m,{name:S,type:C,address:I}),await w()}catch(a){c(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||a.message)}finally{i(!1)}},$=async()=>{var t,s;if(!(!j||!f)){i(!0),c(null);try{await Z(m,{product_id:j,location_id:f,quantity:A}),await w()}catch(a){c(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.message)||a.message)}finally{i(!1)}}},d=Q.filter(t=>{const s=b.find(k=>k.id===t.product_id),a=g.find(k=>k.id===t.location_id),l=!x||(s==null?void 0:s.name.toLowerCase().includes(x.toLowerCase()))||(s==null?void 0:s.sku.toLowerCase().includes(x.toLowerCase()))||(a==null?void 0:a.name.toLowerCase().includes(x.toLowerCase())),n=p==="all"||t.location_id===p,o=!N||t.qty_available<=10;return l&&n&&o}),y=(()=>{const t=d.length,s=d.filter(n=>n.qty_available<=10).length,a=d.filter(n=>n.qty_available===0).length,l=d.reduce((n,o)=>n+o.qty_available,0);return{totalItems:t,lowStockItems:s,outOfStockItems:a,totalQuantity:l}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-lg shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Inventory Management"}),e.jsx("p",{className:"text-green-100",children:"Track and manage your stock across all locations"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>O(v==="table"?"cards":"table"),className:"px-4 py-2 bg-white/20 backdrop-blur rounded-lg hover:bg-white/30 transition-colors text-white font-medium",children:v==="table"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),L()&&e.jsxs("button",{className:"px-4 py-2 bg-white text-green-600 rounded-lg hover:bg-green-50 font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Location"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.totalItems}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("span",{className:"text-xs text-yellow-500 font-medium",children:"Alert"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.lowStockItems}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Stock Items"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Critical"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.outOfStockItems}),e.jsx("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),e.jsx("span",{className:"text-xs text-blue-500 font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y.totalQuantity}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Quantity"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search inventory...",value:x,onChange:t=>W(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("select",{value:p,onChange:t=>q(t.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Locations"}),g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:t=>B(t.target.checked),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show low stock only"})]})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:u?e.jsx(F,{message:"Loading inventory..."}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory found"}),e.jsx("p",{className:"text-gray-500",children:x||p!=="all"||N?"Try adjusting your search or filters to find what you're looking for.":"Get started by adding inventory items."})]}):v==="table"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Last Updated"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(t=>{const s=b.find(o=>o.id===t.product_id),a=g.find(o=>o.id===t.location_id),l=t.qty_available<=10,n=t.qty_available===0;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center text-white font-bold mr-3",children:s==null?void 0:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s==null?void 0:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s==null?void 0:s.sku})]})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:a==null?void 0:a.name}),e.jsx("div",{className:"text-xs text-gray-500",children:a==null?void 0:a.type})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t.qty_available})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n?"bg-red-100 text-red-800":l?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n?"Out of Stock":l?"Low Stock":"In Stock"})}),e.jsx("td",{className:"py-4 px-4 hidden lg:table-cell text-xs text-gray-500",children:t.last_updated?new Date(t.last_updated).toLocaleDateString():"Never"}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Adjust"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"History"})]})})]},t.id)})})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:d.map(t=>{const s=b.find(o=>o.id===t.product_id),a=g.find(o=>o.id===t.location_id),l=t.qty_available<=10,n=t.qty_available===0;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center text-white font-bold",children:s==null?void 0:s.name.charAt(0).toUpperCase()}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n?"bg-red-100 text-red-800":l?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:n?"Out":l?"Low":"In Stock"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s==null?void 0:s.sku}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t.qty_available}),e.jsx("span",{className:"text-xs text-gray-500",children:"units"})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsxs("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a==null?void 0:a.name]}),e.jsx("div",{className:"text-gray-400",children:t.last_updated?`Updated ${new Date(t.last_updated).toLocaleDateString()}`:"Never updated"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:"Adjust"}),e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"History"})]})]})},t.id)})})}),L()&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Location"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Location Name",value:S,onChange:t=>z(t.target.value)}),e.jsxs("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",value:C,onChange:t=>P(t.target.value),children:[e.jsx("option",{value:"store",children:"Store"}),e.jsx("option",{value:"warehouse",children:"Warehouse"}),e.jsx("option",{value:"supplier",children:"Supplier"})]}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Address (optional)",value:I,onChange:t=>D(t.target.value)}),e.jsx("button",{onClick:U,disabled:u,className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50",children:u?"Creating...":"Create Location"}),h&&e.jsx("span",{className:"text-sm text-red-600",children:h})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Inventory Adjustment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:j,onChange:t=>M(t.target.value),children:b.map(t=>e.jsxs("option",{value:t.id,children:[t.sku," â€” ",t.name]},t.id))}),e.jsx("select",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:f,onChange:t=>_(t.target.value),children:g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",type:"number",placeholder:"Quantity",value:A,onChange:t=>E(parseInt(t.target.value||"0",10))}),e.jsx("button",{onClick:$,disabled:u,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:u?"Adjusting...":"Adjust Inventory"}),h&&e.jsx("span",{className:"text-sm text-red-600",children:h})]})]})]})]})}export{re as default};
