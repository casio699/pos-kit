import{u as C,a as E,b as S,r as n,j as e}from"./index-DFD28I4s.js";import{r as _,l as b}from"./client-C7ulCTuc.js";function T(){const j=C(),N=E(),{tenantId:d,setToken:m,setEmail:x}=S(),[l,y]=n.useState(`user-${Date.now()}@example.com`),[r,f]=n.useState("Test123!@#"),[u,v]=n.useState("Test"),[g,w]=n.useState("User"),[o,c]=n.useState(!1),[p,i]=n.useState(null),h=()=>{var t,a;const s=((a=(t=N.state)==null?void 0:t.from)==null?void 0:a.pathname)||"/products";j(s,{replace:!0})},k=async()=>{var s,t;c(!0),i(null);try{await _({email:l,password:r,first_name:u,last_name:g,tenant_id:d});const a=await b({email:l,password:r});m(a.access_token),x(l),h()}catch(a){i(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||a.message)}finally{c(!1)}},L=async()=>{var s,t;c(!0),i(null);try{const a=await b({email:l,password:r});m(a.access_token),x(l),h()}catch(a){i(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||a.message)}finally{c(!1)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Login / Register"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Email"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",value:l,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Password"}),e.jsx("input",{type:"password",className:"w-full border px-3 py-2 rounded",value:r,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"First name"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",value:u,onChange:s=>v(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Last name"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",value:g,onChange:s=>w(s.target.value)})]})]}),p&&e.jsx("div",{className:"text-red-600 text-sm",children:p}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{disabled:o,onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded",children:o?"Please wait...":"Register & Login"}),e.jsx("button",{disabled:o,onClick:L,className:"px-4 py-2 bg-gray-100 rounded",children:o?"Please wait...":"Login"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Tenant: ",d]})]})]})}export{T as default};
