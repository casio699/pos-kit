import{d as U,b as V,c as E,r,j as e,C as H,L as T,A as N}from"./index-DFD28I4s.js";import{L as W}from"./LoadingSpinner-mVzqVygt.js";import{p as v}from"./client-C7ulCTuc.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);function K(){const{tenantId:z}=V(),{isAdmin:k}=E(),[u,C]=r.useState(""),[y,S]=r.useState("usd"),[j,P]=r.useState(""),[o,m]=r.useState(!1),[l,h]=r.useState(null),[f,p]=r.useState(""),[L,R]=r.useState([]),[c,A]=r.useState(""),[g,D]=r.useState("all"),[b,M]=r.useState("table"),I=async()=>{var s,t;m(!0),p(""),h(null);try{const a=await v.createPaymentIntent({amount:parseFloat(u),currency:y,description:j||void 0});h(a.data)}catch(a){p(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to create payment")}finally{m(!1)}},$=async s=>{var t,a;m(!0);try{const i=await v.getPaymentStatus(s);h(i.data)}catch(i){p(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to get payment status")}finally{m(!1)}},n=L.filter(s=>{var i;const t=!c||s.id.toLowerCase().includes(c.toLowerCase())||((i=s.description)==null?void 0:i.toLowerCase().includes(c.toLowerCase()))||s.amount.toString().includes(c),a=g==="all"||s.status===g;return t&&a}),x=(()=>{const s=n.length,t=n.reduce((d,F)=>d+F.amount,0),a=n.filter(d=>d.status==="succeeded").length,i=n.filter(d=>d.status==="pending").length,B=n.filter(d=>d.status==="failed").length;return{totalPayments:s,totalAmount:t,successfulPayments:a,pendingPayments:i,failedPayments:B}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 rounded-lg shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Payment Processing"}),e.jsx("p",{className:"text-indigo-100",children:"Manage payment intents and track transactions"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>M(b==="table"?"cards":"table"),className:"px-4 py-2 bg-white/20 backdrop-blur rounded-lg hover:bg-white/30 transition-colors text-white font-medium",children:b==="table"?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),k()&&e.jsxs("button",{className:"px-4 py-2 bg-white text-indigo-600 rounded-lg hover:bg-indigo-50 font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Payment"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-indigo-600"})}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.totalPayments}),e.jsx("div",{className:"text-sm text-gray-600",children:"Payments"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsx("span",{className:"text-xs text-green-500 font-medium",children:"Amount"})]}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",x.totalAmount.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Amount"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-xs text-green-500 font-medium",children:"Success"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.successfulPayments}),e.jsx("div",{className:"text-sm text-gray-600",children:"Successful"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-yellow-600"})}),e.jsx("span",{className:"text-xs text-yellow-500 font-medium",children:"Pending"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.pendingPayments}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-red-600"})}),e.jsx("span",{className:"text-xs text-red-500 font-medium",children:"Failed"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.failedPayments}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Payment Intent"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:u,onChange:s=>C(s.target.value),className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"10.00",step:"0.01"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:y,onChange:s=>S(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"usd",children:"USD - US Dollar"}),e.jsx("option",{value:"eur",children:"EUR - Euro"}),e.jsx("option",{value:"gbp",children:"GBP - British Pound"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optional)"}),e.jsx("textarea",{value:j,onChange:s=>P(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3,placeholder:"Payment description..."})]}),e.jsx("button",{onClick:I,disabled:o||!u,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors disabled:opacity-50",children:o?"Creating...":"Create Payment Intent"}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:f})]})})]})]}),l&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Intent Created"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Intent ID:"}),e.jsx("span",{className:"text-sm font-mono text-gray-900",children:l.id})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",l.amount/100," ",l.currency.toUpperCase()]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l.status==="succeeded"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Client Secret:"}),e.jsx("span",{className:"text-xs font-mono text-gray-500 max-w-xs truncate",children:l.client_secret})]}),e.jsx("button",{onClick:()=>$(l.id),disabled:o,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:o?"Checking...":"Check Status"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search payments by ID, description, or amount...",value:c,onChange:s=>A(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("select",{value:g,onChange:s=>D(s.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"succeeded",children:"Succeeded"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsx("button",{className:"px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium transition-colors",children:"Export Payments"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:o?e.jsx(W,{message:"Loading payment history..."}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500",children:c||g!=="all"?"Try adjusting your search or filters to find what you're looking for.":"Get started by creating your first payment."})]}):b==="table"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Description"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Created"}),e.jsx("th",{className:"py-4 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.id})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",s.amount]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:(t=s.currency)==null?void 0:t.toUpperCase()})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="succeeded"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsx("td",{className:"py-4 px-4 hidden lg:table-cell text-sm text-gray-500 max-w-xs truncate",children:s.description||"-"}),e.jsx("td",{className:"py-4 px-4 hidden lg:table-cell text-sm text-gray-500",children:s.created_at?new Date(s.created_at).toLocaleDateString():"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View Details"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Check Status"})]})})]},s.id)})})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(s=>{var t;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold",children:s.id.charAt(0).toUpperCase()}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.status==="succeeded"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})]}),e.jsxs("h3",{className:"font-semibold text-gray-900 mb-1",children:["Payment #",s.id]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",s.amount]}),e.jsx("span",{className:"text-sm text-gray-500",children:(t=s.currency)==null?void 0:t.toUpperCase()})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-3 truncate",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700",children:"Details"}),e.jsx("button",{className:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Status"})]})]})},s.id)})})})]})}export{K as default};
